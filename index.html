<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher Alex English Academy BETA</title>
    <link rel="stylesheet" href="base.css">
    <link rel="stylesheet" href="layout.css">
    <link rel="stylesheet" href="theme-patriot.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="main-header">
            <h1 class="portal-title">
                <span class="highlight">Teacher Alex</span> English Academy BETA
            </h1>
            
            <!-- User Info - Apenas no portal -->
            <div class="user-info" id="userInfo">
                <span id="userName"></span>
                <button onclick="logout()" class="logout-btn">Sair</button>
            </div>
        </header>

        <!-- Welcome Message -->
        <div class="welcome-message">
            <h2>Welcome to Your English Learning Portal!</h2>
            <p>Choose your learning path and start your journey to English fluency.</p>
        </div>

        <!-- Navigation Cards -->
        <div class="nav-grid">
            <!-- Listening Practice Card -->
            <div class="nav-card listening-card">
                <div class="card-icon">ğŸ§</div>
                <h3>Listening Practice</h3>
                <p>Improve your listening skills with guided audio exercises</p>
                <div class="progress-info">
                    <span id="listeningProgress">0 of 11 lessons completed</span>
                    <div class="progress-bar">
                        <div class="progress-fill" id="listeningProgressBar"></div>
                    </div>
                </div>
                <button onclick="window.location.href='listening.html'" class="nav-button">Start Listening</button>
            </div>

            <!-- Graded Readers Card -->
            <div class="nav-card graded-card">
                <div class="card-icon">ğŸ“š</div>
                <h3>Graded Readers</h3>
                <p>Read engaging stories at your level with audio support</p>
                <div class="progress-info">
                    <span id="gradedProgress">0 stories completed</span>
                    <div class="progress-bar">
                        <div class="progress-fill" id="gradedProgressBar"></div>
                    </div>
                </div>
                <button onclick="window.location.href='graded-readers-hub.html'" class="nav-button">Explore Stories</button>
            </div>

            <!-- Pure Reading Card -->
            <div class="nav-card pure-reading-card">
                <div class="card-icon">ğŸ“º</div>
                <h3>Pure Reading</h3>
                <p>Focus on text comprehension without audio support</p>
                <div class="progress-info">
                    <span id="pureReadingProgress">0 stories completed</span>
                    <div class="progress-bar">
                        <div class="progress-fill" id="pureReadingProgressBar"></div>
                    </div>
                </div>
                <button onclick="window.location.href='pure-reading-hub.html'" class="nav-button">Start Reading</button>
            </div>

            <!-- Apostilas Card -->
            <div class="nav-card apostilas-card">
                <div class="card-icon">ğŸ“–</div>
                <h3>Apostilas</h3>
                <p>Structured grammar lessons and exercises</p>
                <div class="progress-info">
                    <span>Coming Soon</span>
                </div>
                <button onclick="showComingSoon()" class="nav-button">Coming Soon</button>
            </div>

            <!-- Grammar Practice Card -->
            <div class="nav-card grammar-card">
                <div class="card-icon">âœï¸</div>
                <h3>Grammar Practice</h3>
                <p>Master English grammar with interactive exercises</p>
                <div class="progress-info">
                    <span>Coming Soon</span>
                </div>
                <button onclick="showComingSoon()" class="nav-button">Coming Soon</button>
            </div>

            <!-- Secret Area Card -->
            <div class="nav-card secret-card">
                <div class="card-icon">ğŸ”’</div>
                <h3>Secret Area</h3>
                <p>Something special awaits...</p>
                <div class="progress-info">
                    <span>ğŸ­ Mystery</span>
                </div>
                <button onclick="showSecretMessage()" class="nav-button">Discover</button>
            </div>
        </div>

        <!-- Footer -->
        <footer class="main-footer">
            <p>&copy; 2025 Teacher Alex English Academy. Made with â¤ï¸ for amazing students.</p>
        </footer>
    </div>

    <script>
        // User Management
        function checkLogin() {
            const currentUser = sessionStorage.getItem('currentUser');
            if (!currentUser) {
                window.location.href = 'login.html';
                return;
            }
            
            // Display user info
            document.getElementById('userName').textContent = `Hello, ${currentUser}!`;
            
            // Update progress displays
            updateAllProgress();
        }

        function logout() {
            sessionStorage.removeItem('currentUser');
            window.location.href = 'login.html';
        }

        // Progress Tracking Functions
        function updateAllProgress() {
            updateListeningProgress();
            updateGradedProgress();
            updatePureReadingProgress();
        }

        function updateListeningProgress() {
            const currentUser = sessionStorage.getItem('currentUser');
            if (!currentUser) return;

            let completedLessons = 0;
            const totalLessons = 11;

            // Count completed listening lessons
            for (let i = 1; i <= totalLessons; i++) {
                const lessonKey = `listening_lesson_${i}_${currentUser}`;
                if (localStorage.getItem(lessonKey)) {
                    completedLessons++;
                }
            }

            // Update display
            document.getElementById('listeningProgress').textContent = 
                `${completedLessons} of ${totalLessons} lessons completed`;
            
            const percentage = (completedLessons / totalLessons) * 100;
            document.getElementById('listeningProgressBar').style.width = percentage + '%';
        }

        function updateGradedProgress() {
            const currentUser = sessionStorage.getItem('currentUser');
            if (!currentUser) return;

            let completedStories = 0;
            
            // Count completed graded reader stories
            const stories = [
                'roommate_problem',
                'secret_old_house'
            ];

            stories.forEach(story => {
                const storyKey = `${story}_completed_${currentUser}`;
                if (localStorage.getItem(storyKey)) {
                    completedStories++;
                }
            });

            // Update display
            document.getElementById('gradedProgress').textContent = 
                `${completedStories} stories completed`;
            
            const percentage = stories.length > 0 ? (completedStories / stories.length) * 100 : 0;
            document.getElementById('gradedProgressBar').style.width = percentage + '%';
        }

        function updatePureReadingProgress() {
            const currentUser = sessionStorage.getItem('currentUser');
            if (!currentUser) return;

            let completedStories = 0;
            
            // Count completed pure reading stories
            const pureReadingStories = [
                'perfect_neighbor'
                // Adicione outras histÃ³rias aqui conforme forem criadas
            ];

            pureReadingStories.forEach(story => {
                const storyKey = `pure_reading_${story}_completed_${currentUser}`;
                if (localStorage.getItem(storyKey)) {
                    completedStories++;
                }
            });

            // Update display
            document.getElementById('pureReadingProgress').textContent = 
                `${completedStories} stories completed`;
            
            const percentage = pureReadingStories.length > 0 ? (completedStories / pureReadingStories.length) * 100 : 0;
            document.getElementById('pureReadingProgressBar').style.width = percentage + '%';
        }

        // Secret Area Function
        function showSecretMessage() {
            const messages = [
                "ğŸŒŸ Amazing things come to those who wait...",
                "ğŸ­ The best is yet to come!",
                "ğŸ”® Great mysteries await discovery...",
                "âœ¨ Something magical is brewing...",
                "ğŸª The show must go on!",
                "ğŸ¨ Creativity knows no bounds...",
                "ğŸš€ Ready for takeoff?",
                "ğŸ¯ Focus on the journey, not just the destination!"
            ];
            
            const randomMessage = messages[Math.floor(Math.random() * messages.length)];
            alert(randomMessage);
        }

        // Coming Soon Function
        function showComingSoon() {
            const comingSoonMessages = [
                "ğŸ“š Great content is on the way!",
                "â³ Patience, grasshopper!",
                "ğŸª The show is being prepared...",
                "ğŸ”§ Under construction with love!",
                "ğŸŒŸ Something awesome is coming!"
            ];
            
            const randomMessage = comingSoonMessages[Math.floor(Math.random() * comingSoonMessages.length)];
            alert(randomMessage);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            checkLogin();
        });
    </script>
</body>
</html>
