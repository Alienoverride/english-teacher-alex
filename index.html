<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher Alex — English Academy | Portal do Estudante</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;700&display=swap');
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #1e3a8a 0%, #dc2626 50%, #1e3a8a 100%);
            min-height: 100vh; color: #1f2937; line-height: 1.6; overflow-x: hidden;
        }
        
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        
        /* LOGO GENIAL NOVO */
        .header {
            background: rgba(255, 255, 255, 0.98); backdrop-filter: blur(25px);
            border-radius: 30px; padding: 50px 40px; text-align: center; margin-bottom: 40px;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.15); border: 1px solid rgba(255, 255, 255, 0.3);
            position: relative; overflow: hidden;
        }
        
        .header::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; height: 5px;
            background: linear-gradient(90deg, #1e3a8a, #dc2626, #fbbf24, #10b981, #8b5cf6, #dc2626, #1e3a8a);
            background-size: 400% 400%; animation: rainbowFlow 4s ease-in-out infinite;
        }
        
        @keyframes rainbowFlow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        /* LOGO REVOLUCIONÁRIO */
        .logo-container {
            position: relative; margin-bottom: 25px;
        }
        
        .logo {
            font-family: 'Inter', sans-serif; font-size: 3.2em; font-weight: 900;
            letter-spacing: -1px; position: relative; display: inline-block;
            background: linear-gradient(135deg, #0f172a, #1e3a8a, #dc2626, #fbbf24);
            background-size: 300% 300%; background-clip: text; -webkit-background-clip: text;
            -webkit-text-fill-color: transparent; animation: logoShift 6s ease-in-out infinite;
            filter: drop-shadow(0 0 30px rgba(30, 58, 138, 0.4)) drop-shadow(0 0 20px rgba(220, 38, 38, 0.3));
        }
        
        @keyframes logoShift {
            0%, 100% { background-position: 0% 50%; }
            33% { background-position: 50% 25%; }
            66% { background-position: 100% 75%; }
        }
        
        .logo-teacher { position: relative; }
        .logo-alex { position: relative; margin: 0 8px; }
        .logo-academy { position: relative; }
        
        /* HÍFEN GENIAL */
        .logo-divider {
            font-family: 'JetBrains Mono', monospace; font-size: 1.2em; font-weight: 700;
            background: linear-gradient(135deg, #fbbf24, #f59e0b); color: transparent;
            background-clip: text; -webkit-background-clip: text; position: relative;
            display: inline-block; margin: 0 15px; animation: dividerGlow 3s ease-in-out infinite;
            filter: drop-shadow(0 0 15px #fbbf24);
        }
        
        @keyframes dividerGlow {
            0%, 100% { 
                transform: scale(1) rotate(0deg);
                filter: drop-shadow(0 0 15px #fbbf24);
            }
            50% { 
                transform: scale(1.2) rotate(5deg);
                filter: drop-shadow(0 0 25px #f59e0b) drop-shadow(0 0 35px #fbbf24);
            }
        }
        
        /* EFEITOS ESPECIAIS NO LOGO */
        .logo-teacher::before {
            content: ''; position: absolute; top: -10px; left: -10px; right: -10px; bottom: -10px;
            background: radial-gradient(circle, rgba(30, 58, 138, 0.1) 0%, transparent 70%);
            border-radius: 50%; animation: pulse1 4s ease-in-out infinite;
        }
        
        .logo-academy::after {
            content: ''; position: absolute; top: -15px; left: -15px; right: -15px; bottom: -15px;
            background: radial-gradient(circle, rgba(220, 38, 38, 0.1) 0%, transparent 70%);
            border-radius: 50%; animation: pulse2 4s ease-in-out infinite 2s;
        }
        
        @keyframes pulse1 {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.5); opacity: 0.2; }
        }
        
        @keyframes pulse2 {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.3); opacity: 0.3; }
        }
        
        .tagline {
            font-size: 1.6em; color: #dc2626; font-weight: 700; margin-bottom: 20px;
            text-shadow: 0 2px 4px rgba(220, 38, 38, 0.2);
            background: linear-gradient(135deg, #dc2626, #ef4444, #dc2626);
            background-size: 200% 200%; background-clip: text; -webkit-background-clip: text;
            -webkit-text-fill-color: transparent; animation: taglineShine 3s ease-in-out infinite;
        }
        
        @keyframes taglineShine {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .welcome-message { 
            font-size: 1.4em; color: #dc2626; font-weight: 700; margin-bottom: 12px;
        }
        
        .description {
            font-size: 1.15em; color: #64748b; max-width: 700px; margin: 0 auto;
            font-weight: 500; line-height: 1.7;
        }
        
        /* SEÇÃO DE PROGRESSO */
        .progress-overview {
            background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(20px);
            border-radius: 25px; padding: 35px; margin-bottom: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1); border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .progress-title {
            font-size: 2em; background: linear-gradient(135deg, #1e3a8a, #dc2626);
            background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            font-weight: 900; margin-bottom: 30px; text-align: center;
        }
        
        .stats-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 25px; margin-bottom: 30px;
        }
        
        .stat-item {
            background: linear-gradient(135deg, rgba(30, 58, 138, 0.05), rgba(220, 38, 38, 0.05));
            border-radius: 20px; padding: 25px; text-align: center;
            border: 2px solid rgba(30, 58, 138, 0.1); transition: all 0.4s ease;
            position: relative; overflow: hidden;
        }
        
        .stat-item::before {
            content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.6s;
        }
        
        .stat-item:hover {
            transform: translateY(-5px) scale(1.03); 
            box-shadow: 0 15px 40px rgba(30, 58, 138, 0.2);
            border-color: #dc2626;
        }
        
        .stat-item:hover::before { left: 100%; }
        
        .stat-number {
            font-size: 2.5em; font-weight: 900;
            background: linear-gradient(135deg, #1e3a8a, #dc2626);
            background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            display: block; margin-bottom: 8px;
        }
        
        .stat-label { color: #64748b; font-weight: 600; }
        
        /* CARDS DE ATIVIDADES */
        .activities-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 35px; margin-bottom: 50px;
        }
        
        .activity-card {
            background: rgba(255, 255, 255, 0.98); backdrop-filter: blur(25px);
            border-radius: 25px; padding: 40px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.12);
            border: 1px solid rgba(255, 255, 255, 0.3); transition: all 0.5s cubic-bezier(0.23, 1, 0.320, 1);
            text-align: center; position: relative; overflow: hidden;
        }
        
        .activity-card::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; height: 4px;
            background: linear-gradient(90deg, #1e3a8a, #dc2626); transform: scaleX(0);
            transition: transform 0.5s ease; transform-origin: left;
        }
        
        .activity-card:hover::before { transform: scaleX(1); }
        
        .activity-card:hover {
            transform: translateY(-12px) scale(1.02);
            box-shadow: 0 35px 80px rgba(0, 0, 0, 0.18);
        }
        
        .activity-icon {
            font-size: 5em; margin-bottom: 25px; display: block;
            filter: drop-shadow(0 6px 12px rgba(0,0,0,0.15));
            animation: float 4s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-8px); }
        }
        
        .activity-title {
            font-size: 2.2em; color: #1e3a8a; font-weight: 800; margin-bottom: 15px;
            letter-spacing: -0.5px;
        }
        
        .activity-subtitle {
            font-size: 1.4em; color: #dc2626; font-weight: 700; margin-bottom: 20px;
        }
        
        .activity-description {
            color: #64748b; margin-bottom: 25px; line-height: 1.8; font-weight: 500;
            font-size: 1.05em;
        }
        
        .features {
            display: flex; flex-wrap: wrap; gap: 12px; justify-content: center; margin-bottom: 30px;
        }
        
        .feature-tag {
            background: linear-gradient(135deg, #f1f5f9, #e2e8f0); color: #475569;
            padding: 10px 18px; border-radius: 25px; font-size: 0.9em; font-weight: 600;
            border: 2px solid rgba(71, 85, 105, 0.1); transition: all 0.3s ease;
        }
        
        .feature-tag:hover {
            background: linear-gradient(135deg, #1e3a8a, #dc2626); color: white;
            transform: scale(1.05);
        }
        
        .btn-activity {
            background: linear-gradient(135deg, #1e3a8a, #dc2626); color: white;
            padding: 18px 35px; border: none; border-radius: 20px; font-size: 1.15em;
            font-weight: 700; cursor: pointer; transition: all 0.4s ease;
            text-decoration: none; display: inline-block; width: 100%;
            position: relative; overflow: hidden; text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .btn-activity::before {
            content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.6s;
        }
        
        .btn-activity:hover::before { left: 100%; }
        
        .btn-activity:hover {
            transform: translateY(-3px); box-shadow: 0 15px 40px rgba(30, 58, 138, 0.5);
            background: linear-gradient(135deg, #1e40af, #ef4444);
        }
        
        .progress-badge {
            position: absolute; top: 15px; left: 15px;
            background: linear-gradient(135deg, #22c55e, #16a34a); color: white;
            padding: 8px 16px; border-radius: 15px; font-size: 0.8em; font-weight: 700;
            box-shadow: 0 6px 20px rgba(34, 197, 94, 0.4);
        }
        
        .new-badge {
            background: linear-gradient(135deg, #ef4444, #dc2626); color: white;
            padding: 8px 16px; border-radius: 15px; font-size: 0.75em; font-weight: 800;
            position: absolute; top: 15px; right: 15px; animation: pulse 2s infinite;
            box-shadow: 0 6px 20px rgba(239, 68, 68, 0.4); text-transform: uppercase;
        }
        
        /* SEÇÕES DE INFORMAÇÃO */
        .info-section {
            background: rgba(255, 255, 255, 0.98); backdrop-filter: blur(25px);
            border-radius: 25px; padding: 45px; margin-bottom: 35px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1); border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .info-title {
            font-size: 2.5em; background: linear-gradient(135deg, #1e3a8a, #dc2626, #fbbf24, #1e3a8a);
            background-size: 300% 300%; background-clip: text; -webkit-background-clip: text;
            -webkit-text-fill-color: transparent; font-weight: 900; margin-bottom: 40px;
            text-align: center; letter-spacing: -1px; animation: titleGradient 4s ease-in-out infinite;
        }
        
        @keyframes titleGradient {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .instructions {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px; margin-bottom: 25px;
        }
        
        .instruction-item {
            background: linear-gradient(135deg, rgba(30, 58, 138, 0.05), rgba(220, 38, 38, 0.05));
            padding: 30px; border-radius: 20px; border: 3px solid transparent;
            background-clip: padding-box; transition: all 0.5s ease; position: relative; overflow: hidden;
        }
        
        .instruction-item::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            border-radius: 20px; padding: 3px;
            background: linear-gradient(135deg, #1e3a8a, #dc2626, #fbbf24, #dc2626, #1e3a8a);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: exclude; mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: exclude;
        }
        
        .instruction-item:hover {
            transform: translateY(-8px) scale(1.03); 
            box-shadow: 0 20px 50px rgba(30, 58, 138, 0.2);
        }
        
        .instruction-number {
            background: linear-gradient(135deg, #dc2626, #ef4444); color: white;
            width: 50px; height: 50px; border-radius: 50%; display: flex;
            align-items: center; justify-content: center; font-weight: 900;
            font-size: 1.3em; margin-bottom: 20px; box-shadow: 0 10px 30px rgba(220, 38, 38, 0.4);
            border: 3px solid rgba(255, 255, 255, 0.2); animation: numberPulse 3s ease-in-out infinite;
        }
        
        @keyframes numberPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .instruction-text { color: #475569; line-height: 1.7; font-weight: 500; }
        .instruction-text strong { color: #1e3a8a; font-weight: 700; }
        
        /* TIPS ESPECIAIS */
        .study-tips .instruction-number {
            background: linear-gradient(135deg, #1e3a8a, #dc2626); font-size: 2em;
            animation: emojiDance 4s ease-in-out infinite;
        }
        
        @keyframes emojiDance {
            0%, 100% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.15) rotate(-8deg); }
            75% { transform: scale(1.15) rotate(8deg); }
        }
        
        /* FOOTER */
        .footer {
            background: rgba(255, 255, 255, 0.98); backdrop-filter: blur(25px);
            border-radius: 25px; padding: 35px; text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1); border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .footer-text { color: #64748b; margin-bottom: 15px; font-weight: 500; }
        .contact-info { color: #1e3a8a; font-weight: 700; font-size: 1.1em; }
        
        /* ANIMAÇÕES */
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
        
        /* RESPONSIVO */
        @media (max-width: 768px) {
            .container { padding: 15px; }
            .logo { font-size: 2.2em; }
            .tagline { font-size: 1.3em; }
            .activities-grid { grid-template-columns: 1fr; }
            .activity-card { padding: 30px; }
            .instructions { grid-template-columns: 1fr; }
            .stats-grid { grid-template-columns: repeat(2, 1fr); }
            .info-title { font-size: 2em; }
        }
        
        @media (max-width: 480px) {
            .logo { font-size: 1.8em; }
            .stats-grid { grid-template-columns: 1fr; }
            .stat-number { font-size: 2em; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- HEADER COM LOGO GENIAL -->
        <div class="header">
            <div class="logo-container">
                <div class="logo">
                    <span class="logo-teacher">TEACHER</span>
                    <span class="logo-alex">ALEX</span>
                    <span class="logo-divider">—</span>
                    <span class="logo-academy">ENGLISH ACADEMY</span>
                </div>
            </div>
            <div class="welcome-message" id="welcomeMessage">Bem-vindo de volta!</div>
            <div class="tagline">Sua Plataforma Personalizada de Inglês</div>
            <div class="description">
                Pratique suas habilidades em inglês a qualquer hora, em qualquer lugar! Acesse exercícios interativos de listening e atividades de leitura graduadas para melhorar sua compreensão e gramática.
            </div>
        </div>
        
        <!-- SEÇÃO DE PROGRESSO -->
        <div class="progress-overview">
            <div class="progress-title">📊 Seu Progresso</div>
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-number" id="lessonsCompleted">0</div>
                    <div class="stat-label">Lições Concluídas</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="chaptersRead">0</div>
                    <div class="stat-label">Capítulos Lidos</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="totalBadges">0</div>
                    <div class="stat-label">Badges Conquistadas</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="studyTime">0h</div>
                    <div class="stat-label">Tempo de Estudo</div>
                </div>
            </div>
        </div>
        
        <!-- CARDS DE ATIVIDADES -->
        <div class="activities-grid">
            <div class="activity-card">
                <div class="new-badge">NOVO!</div>
                <div class="activity-icon">🎧</div>
                <div class="activity-title">Listening Lessons</div>
                <div class="activity-subtitle">Prática Interativa de Áudio</div>
                <div class="activity-description">
                    Melhore suas habilidades de listening com conversas reais e exercícios. Cada lição inclui áudio, perguntas e feedback instantâneo com recompensas gamificadas!
                </div>
                <div class="features">
                    <span class="feature-tag">5 Lições</span>
                    <span class="feature-tag">Áudio + Perguntas</span>
                    <span class="feature-tag">Feedback Instantâneo</span>
                    <span class="feature-tag">Progresso</span>
                </div>
                <a href="listening.html" class="btn-activity">🎯 Iniciar Prática de Listening</a>
            </div>
            
            <div class="activity-card">
                <div class="new-badge">NOVO!</div>
                <div class="activity-icon">📚</div>
                <div class="activity-title">Graded Reader</div>
                <div class="activity-subtitle">"The Secret in the Old House"</div>
                <div class="activity-description">
                    Leia uma história de mistério envolvente com narração em áudio. Teste sua compreensão e habilidades gramaticais com perguntas interativas para cada capítulo.
                </div>
                <div class="features">
                    <span class="feature-tag">Nível A2</span>
                    <span class="feature-tag">4 Capítulos</span>
                    <span class="feature-tag">Áudio + Texto</span>
                    <span class="feature-tag">Foco Gramatical</span>
                </div>
                <a href="reader.html" class="btn-activity">📖 Iniciar Aventura de Leitura</a>
            </div>
        </div>
        
        <!-- COMO USAR -->
        <div class="info-section">
            <div class="info-title">📋 Como Usar Esta Plataforma</div>
            <div class="instructions">
                <div class="instruction-item">
                    <div class="instruction-number">1</div>
                    <div class="instruction-text">
                        <strong>Escolha uma Atividade:</strong> Selecione entre Listening Lessons ou Graded Reader baseado no que você quer praticar hoje.
                    </div>
                </div>
                <div class="instruction-item">
                    <div class="instruction-number">2</div>
                    <div class="instruction-text">
                        <strong>Escute e Leia:</strong> Use fones de ouvido para a melhor experiência de áudio. Acompanhe com o texto quando disponível.
                    </div>
                </div>
                <div class="instruction-item">
                    <div class="instruction-number">3</div>
                    <div class="instruction-text">
                        <strong>Responda as Perguntas:</strong> Teste sua compreensão com perguntas de interpretação e gramática após cada áudio/capítulo.
                    </div>
                </div>
                <div class="instruction-item">
                    <div class="instruction-number">4</div>
                    <div class="instruction-text">
                        <strong>Acompanhe seu Progresso:</strong> Ganhe badges e veja suas notas melhorarem conforme você pratica mais!
                    </div>
                </div>
            </div>
        </div>
        
        <!-- O QUE VOCÊ VAI APRENDER -->
        <div class="info-section">
            <div class="info-title">🎯 O Que Você Vai Aprender</div>
            <div class="instructions">
                <div class="instruction-item">
                    <div class="instruction-number">🎧</div>
                    <div class="instruction-text">
                        <strong>Listening Skills:</strong> 5 tópicos essenciais incluindo introduções pessoais, rotina diária, hobbies, clima e compras com áudios nativos.
                    </div>
                </div>
                <div class="instruction-item">
                    <div class="instruction-number">📖</div>
                    <div class="instruction-text">
                        <strong>Reading Comprehension:</strong> História completa de mistério dividida em 4 capítulos progressivos com foco em interpretação.
                    </div>
                </div>
                <div class="instruction-item">
                    <div class="instruction-number">🧠</div>
                    <div class="instruction-text">
                        <strong>Grammar Practice:</strong> Exercícios específicos de gramática integrados às atividades para reforço contextual.
                    </div>
                </div>
                <div class="instruction-item">
                    <div class="instruction-number">🏆</div>
                    <div class="instruction-text">
                        <strong>Progress Tracking:</strong> Sistema de badges, pontuações e acompanhamento detalhado do seu desenvolvimento.
                    </div>
                </div>
            </div>
        </div>
        
        <!-- DICAS DE ESTUDO */
        <div class="info-section study-tips">
            <div class="info-title">💡 Dicas de Estudo para o Sucesso</div>
            <div class="instructions">
                <div class="instruction-item">
                    <div class="instruction-number">🎧</div>
                    <div class="instruction-text">
                        <strong>Escute Várias Vezes:</strong> Não se preocupe se não entender tudo na primeira vez. Escute novamente e foque em detalhes diferentes a cada vez.
                    </div>
                </div>
                <div class="instruction-item">
                    <div class="instruction-number">📝</div>
                    <div class="instruction-text">
                        <strong>Faça Anotações:</strong> Anote palavras ou frases novas que você ouvir. Procure depois para expandir seu vocabulário.
                    </div>
                </div>
                <div class="instruction-item">
                    <div class="instruction-number">🎯</div>
                    <div class="instruction-text">
                        <strong>Pratique Diariamente:</strong> Mesmo 15-20 minutos de prática diária melhorarão seu inglês mais rápido que sessões longas e esparsas.
                    </div>
                </div>
                <div class="instruction-item">
                    <div class="instruction-number">🏆</div>
                    <div class="instruction-text">
                        <strong>Celebre o Progresso:</strong> Colete todos os badges e busque notas perfeitas. Cada pequena melhoria conta!
                    </div>
                </div>
            </div>
        </div>
        
        <!-- FOOTER -->
        <div class="footer">
            <div class="footer-text">
                Dúvidas sobre as lições? Precisa de ajuda com seus estudos de inglês?
            </div>
            <div class="contact-info">
                📧 Contato Professor Alex: alexmg@gmail.com
            </div>
            <div class="footer-text" style="margin-top: 20px; font-size: 0.95em;">
                🌟 Continue praticando, continue melhorando! Sua jornada no inglês começa aqui. 🌟
            </div>
        </div>
    </div>
    
    <script>
        // ===== SISTEMA DE PROTEÇÃO DE LOGIN =====
        function checkLogin() {
            if (sessionStorage.getItem('studentLoggedIn') !== 'true') {
                window.location.href = 'login.html';
                return false;
            }
            return true;
        }

        function logout() {
            sessionStorage.removeItem('studentLoggedIn');
            sessionStorage.removeItem('studentUsername');
            window.location.href = 'login.html';
        }

        function getStudentName() {
            return sessionStorage.getItem('studentUsername') || 'Student';
        }

        if (!checkLogin()) //throw new Error('Not logged in');

        // ===== SISTEMA DE PROGRESSO =====
        class ProgressTracker {
            constructor() {
                this.studentId = sessionStorage.getItem('studentUsername') || 'student';
                this.progressKey = `progress_${this.studentId}`;
                this.loadProgress();
            }

            loadProgress() {
                const saved = localStorage.getItem(this.progressKey);
                if (saved) {
                    this.data = JSON.parse(saved);
                } else {
                    this.data = {
                        listening: { lessonsCompleted: [], bestScores: {}, totalAttempts: 0, badges: [] },
                        reading: { chaptersCompleted: [], bestScores: {}, totalAttempts: 0, badges: [] },
                        globalBadges: [], lastActivity: null, joinDate: new Date().toISOString(), totalStudyTime: 0
                    };
                }
            }

            getStats() {
                const listeningLessons = this.data.listening.lessonsCompleted.length;
                const readingChapters = this.data.reading.chaptersCompleted.length;
                const totalBadges = this.data.listening.badges.length + this.data.reading.badges.length + this.data.globalBadges.length;
                const studyTimeHours = Math.floor(this.data.totalStudyTime / (1000 * 60 * 60));

                return {
                    lessonsCompleted: listeningLessons,
                    chaptersRead: readingChapters,
                    totalBadges: totalBadges,
                    studyTime: studyTimeHours,
                    hasListeningProgress: listeningLessons > 0,
                    hasReadingProgress: readingChapters > 0
                };
            }
        }

        // ===== INICIALIZAÇÃO =====
        document.addEventListener('DOMContentLoaded', function() {
            const studentName = getStudentName();
            const progressTracker = new ProgressTracker();
            const stats = progressTracker.getStats();
            
            // Atualizar informações do usuário
            document.getElementById('welcomeMessage').textContent = `Bem-vindo de volta, ${studentName}!`;
            
            // Atualizar estatísticas REAIS
            document.getElementById('lessonsCompleted').textContent = stats.lessonsCompleted;
            document.getElementById('chaptersRead').textContent = stats.chaptersRead;
            document.getElementById('totalBadges').textContent = stats.totalBadges;
            document.getElementById('studyTime').textContent = stats.studyTime + 'h';
            
            // Adicionar badges de progresso nos cards
            const listeningCard = document.querySelector('.activity-card:first-child');
            const readingCard = document.querySelector('.activity-card:last-child');
            
            if (stats.hasListeningProgress) {
                const badge = document.createElement('div');
                badge.className = 'progress-badge';
                badge.textContent = `${stats.lessonsCompleted}/5 ✓`;
                listeningCard.appendChild(badge);
            }
            
            if (stats.hasReadingProgress) {
                const badge = document.createElement('div');
                badge.className = 'progress-badge';
                badge.textContent = `${stats.chaptersRead}/4 ✓`;
                readingCard.appendChild(badge);
            }
            
            // Animação de contadores
            animateCounters();
            
            // Criar botão de logout
            createLogoutButton();
            
            // Adicionar efeitos interativos
            addInteractiveEffects();
        });

        function animateCounters() {
            const counters = document.querySelectorAll('.stat-number');
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const target = parseInt(entry.target.textContent.replace('h', ''));
                        let current = 0;
                        const increment = target / 30;
                        const timer = setInterval(() => {
                            current += increment;
                            if (current >= target) {
                                entry.target.textContent = target + (entry.target.textContent.includes('h') ? 'h' : '');
                                clearInterval(timer);
                            } else {
                                entry.target.textContent = Math.floor(current) + (entry.target.textContent.includes('h') ? 'h' : '');
                            }
                        }, 50);
                        observer.unobserve(entry.target);
                    }
                });
            });
            
            counters.forEach(counter => observer.observe(counter));
        }

        function createLogoutButton() {
            const logoutBtn = document.createElement('div');
            logoutBtn.innerHTML = `
                <div style="position: fixed; top: 15px; right: 15px; z-index: 1000;">
                    <div style="background: rgba(255,255,255,0.98); border-radius: 15px; padding: 10px 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); border: 2px solid #dc2626; backdrop-filter: blur(15px);">
                        <span style="color: #1e3a8a; font-weight: 800; margin-right: 10px; font-size: 0.85em;">👋 ${getStudentName()}</span>
                        <button onclick="logout()" style="background: linear-gradient(135deg, #dc2626, #ef4444); color: white; border: none; padding: 8px 12px; border-radius: 10px; cursor: pointer; font-size: 0.8em; font-weight: 700; transition: all 0.3s ease;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">🚪 Sair</button>
                    </div>
                </div>
            `;
            document.body.appendChild(logoutBtn);
        }

        function addInteractiveEffects() {
            // Efeito parallax no header
            window.addEventListener('scroll', () => {
                const scrolled = window.pageYOffset;
                const header = document.querySelector('.header');
                if (header) {
                    header.style.transform = `translateY(${scrolled * 0.1}px)`;
                }
            });

            // Efeitos nos cards de atividade
            const activityCards = document.querySelectorAll('.activity-card');
            activityCards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-12px) scale(1.02)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0) scale(1)';
                });
            });

            // Efeito de brilho nos botões
            const buttons = document.querySelectorAll('.btn-activity');
            buttons.forEach(button => {
                button.addEventListener('click', function(e) {
                    // Efeito de loading
                    const originalText = this.textContent;
                    this.textContent = '⏳ Carregando...';
                    this.style.background = '#6b7280';
                    
                    setTimeout(() => {
                        window.location.href = this.getAttribute('href');
                    }, 800);
                    
                    e.preventDefault();
                });
            });
        }
    </script>
</body>
</html>
