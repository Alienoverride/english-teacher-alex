<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher Alex English Academy BETA - Portal do Estudante</title>
    
    <!-- CSS EXTERNO - SEU GARAGE CENTRAL! -->
    <link rel="stylesheet" href="base.css">
    <link rel="stylesheet" href="layout.css">
    <link rel="stylesheet" href="theme-patriot.css">
</head>
<body>
    <div class="user-info">
        <div class="user-avatar" id="userAvatar">A</div>
        <div class="user-name" id="userName">Aluno</div>
        <button class="logout-btn" onclick="logout()">Sair</button>
    </div>
    
    <div class="container">
        <div class="header">
            <div class="logo">
                Teacher Alex <span class="logo-highlight">English Academy</span> BETA
            </div>
            <div class="welcome-message" id="welcomeMessage">Bem-vindo de volta!</div>
            <div class="subtitle">Escolha sua atividade e continue aprendendo inglÃªs</div>
        </div>
        
        <div class="stats-section">
            <div class="stats-title">ğŸ“Š Seu Progresso</div>
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-number" id="lessonsCompleted">0</div>
                    <div class="stat-label">LiÃ§Ãµes ConcluÃ­das</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="chaptersRead">0</div>
                    <div class="stat-label">CapÃ­tulos Lidos</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="totalBadges">0</div>
                    <div class="stat-label">Badges Conquistadas</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="studyTime">0h</div>
                    <div class="stat-label">Tempo de Estudo</div>
                </div>
            </div>
        </div>
        
        <div class="dashboard-grid">
            <a href="listening.html" class="activity-card">
                <div class="activity-icon">ğŸ§</div>
                <div class="activity-title">Listening Practice</div>
                <div class="activity-description">Melhore sua compreensÃ£o auditiva com diÃ¡logos autÃªnticos</div>
                <ul class="activity-features">
                    <li>5 liÃ§Ãµes interativas</li>
                    <li>Ãudios nativos de qualidade</li>
                    <li>Quiz de compreensÃ£o</li>
                    <li>Sistema de badges</li>
                </ul>
                <button class="start-button">ComeÃ§ar Listening</button>
            </a>
            
            <a href="reader.html" class="activity-card">
                <div class="activity-icon">ğŸ“š</div>
                <div class="activity-title">Graded Reader A2</div>
                <div class="activity-description">Pratique leitura com histÃ³ria envolvente em nÃ­vel A2</div>
                <ul class="activity-features">
                    <li>HistÃ³ria: "The Secret in the Old House"</li>
                    <li>4 capÃ­tulos progressivos</li>
                    <li>QuestÃµes de interpretaÃ§Ã£o</li>
                    <li>ExercÃ­cios de gramÃ¡tica</li>
                </ul>
                <button class="start-button">ComeÃ§ar Leitura A2</button>
            </a>
            
            <a href="roommate.html" class="activity-card">
                <div class="activity-icon">ğŸ </div>
                <div class="activity-title">Beginner Reading A1</div>
                <div class="activity-description">HistÃ³ria perfeita para iniciantes: vocabulÃ¡rio simples e envolvente</div>
                <ul class="activity-features">
                    <li>HistÃ³ria: "The Roommate Problem"</li>
                    <li>3 capÃ­tulos nÃ­vel A1</li>
                    <li>GramÃ¡tica bÃ¡sica</li>
                    <li>VocabulÃ¡rio do dia a dia</li>
                </ul>
                <button class="start-button">ComeÃ§ar Leitura A1</button>
            </a>
            
            <a href="neighbor.html" class="activity-card">
                <div class="activity-icon">ğŸ“º</div>
                <div class="activity-title">Pure Reading A2</div>
                <div class="activity-description">HistÃ³ria envolvente focada 100% na leitura e interpretaÃ§Ã£o</div>
                <ul class="activity-features">
                    <li>HistÃ³ria: "The Perfect Neighbor"</li>
                    <li>5 capÃ­tulos thriller</li>
                    <li>Leitura pura (sem Ã¡udio)</li>
                    <li>Foco na interpretaÃ§Ã£o</li>
                </ul>
                <button class="start-button">ComeÃ§ar Leitura Pura</button>
            </a>
        </div>
        
        <div class="info-section">
            <div class="info-title">ğŸ“‹ Como Usar Esta Plataforma</div>
            <div class="instructions">
                <div class="instruction-item">
                    <div class="instruction-number">1</div>
                    <div class="instruction-text">
                        <strong>Escolha uma Atividade:</strong> Selecione entre Listening, Reading com Ã¡udio ou Pure Reading baseado no que vocÃª quer praticar hoje.
                    </div>
                </div>
                <div class="instruction-item">
                    <div class="instruction-number">2</div>
                    <div class="instruction-text">
                        <strong>Escute e Leia:</strong> Use fones de ouvido para atividades com Ã¡udio. Para Pure Reading, foque 100% na leitura e interpretaÃ§Ã£o.
                    </div>
                </div>
                <div class="instruction-item">
                    <div class="instruction-number">3</div>
                    <div class="instruction-text">
                        <strong>Responda as Perguntas:</strong> Teste sua compreensÃ£o com perguntas de interpretaÃ§Ã£o e gramÃ¡tica apÃ³s cada capÃ­tulo.
                    </div>
                </div>
                <div class="instruction-item">
                    <div class="instruction-number">4</div>
                    <div class="instruction-text">
                        <strong>Acompanhe seu Progresso:</strong> Ganhe badges e veja suas notas melhorarem conforme vocÃª pratica mais!
                    </div>
                </div>
            </div>
        </div>
        
        <div class="info-section study-tips">
            <div class="info-title">ğŸ’¡ Dicas de Estudo para o Sucesso</div>
            <div class="instructions">
                <div class="instruction-item">
                    <div class="instruction-number">ğŸ§</div>
                    <div class="instruction-text">
                        <strong>Listening:</strong> NÃ£o se preocupe se nÃ£o entender tudo na primeira vez. Escute novamente e foque em detalhes diferentes a cada vez.
                    </div>
                </div>
                <div class="instruction-item">
                    <div class="instruction-number">ğŸ“–</div>
                    <div class="instruction-text">
                        <strong>Pure Reading:</strong> Leia devagar e com atenÃ§Ã£o. Se nÃ£o entender uma palavra, tente entender pelo contexto antes de buscar o significado.
                    </div>
                </div>
                <div class="instruction-item">
                    <div class="instruction-number">ğŸ¯</div>
                    <div class="instruction-text">
                        <strong>Pratique Diariamente:</strong> Mesmo 15-20 minutos de prÃ¡tica diÃ¡ria melhorarÃ£o seu inglÃªs mais rÃ¡pido que sessÃµes longas e esparsas.
                    </div>
                </div>
                <div class="instruction-item">
                    <div class="instruction-number">ğŸ†</div>
                    <div class="instruction-text">
                        <strong>Celebre o Progresso:</strong> Colete todos os badges e busque notas perfeitas. Cada pequena melhoria conta!
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <h3>ğŸ“ Teacher Alex English Academy BETA</h3>
            <p>Sua jornada para dominar o inglÃªs comeÃ§a aqui!</p>
            <p>DÃºvidas? Entre em contato: <a href="mailto:alexmg@gmail.com" class="contact-link">alexmg@gmail.com</a></p>
        </div>
    </div>
    
    <script>
        // ===== SISTEMA DE PROTEÃ‡ÃƒO DE LOGIN =====
        function checkLogin() {
            if (sessionStorage.getItem('studentLoggedIn') !== 'true') {
                window.location.href = 'login.html';
                return false;
            }
            return true;
        }

        function logout() {
            sessionStorage.removeItem('studentLoggedIn');
            sessionStorage.removeItem('studentUsername');
            window.location.href = 'login.html';
        }

        function getStudentName() {
            return sessionStorage.getItem('studentUsername') || 'Student';
        }

        // Verificar login ao carregar a pÃ¡gina
        if (!checkLogin()) {
            throw new Error('Not logged in');
        }

        // ===== SISTEMA DE PROGRESSO =====
        class ProgressTracker {
            constructor() {
                this.studentId = sessionStorage.getItem('studentUsername') || 'student';
                this.progressKey = `progress_${this.studentId}`;
                this.loadProgress();
            }

            loadProgress() {
                const saved = localStorage.getItem(this.progressKey);
                if (saved) {
                    this.data = JSON.parse(saved);
                } else {
                    this.data = {
                        listening: {
                            lessonsCompleted: [],
                            bestScores: {},
                            totalAttempts: 0,
                            badges: []
                        },
                        reading: {
                            chaptersCompleted: [],
                            bestScores: {},
                            totalAttempts: 0,
                            badges: []
                        },
                        roommate: {
                            chaptersCompleted: [],
                            bestScores: {},
                            totalAttempts: 0,
                            badges: []
                        },
                        neighbor: {
                            chaptersCompleted: [],
                            bestScores: {},
                            totalAttempts: 0,
                            badges: []
                        },
                        globalBadges: [],
                        lastActivity: null,
                        joinDate: new Date().toISOString(),
                        totalStudyTime: 0
                    };
                }
                // Adicionar categorias se nÃ£o existirem (compatibilidade)
                if (!this.data.roommate) {
                    this.data.roommate = {
                        chaptersCompleted: [],
                        bestScores: {},
                        totalAttempts: 0,
                        badges: []
                    };
                }
                if (!this.data.neighbor) {
                    this.data.neighbor = {
                        chaptersCompleted: [],
                        bestScores: {},
                        totalAttempts: 0,
                        badges: []
                    };
                }
            }

            getStats() {
                const listeningLessons = this.data.listening.lessonsCompleted.length;
                const readingChapters = this.data.reading.chaptersCompleted.length;
                const roommateChapters = this.data.roommate ? this.data.roommate.chaptersCompleted.length : 0;
                const neighborChapters = this.data.neighbor ? this.data.neighbor.chaptersCompleted.length : 0;
                const totalChapters = readingChapters + roommateChapters + neighborChapters;
                const totalBadges = this.data.listening.badges.length + 
                                  this.data.reading.badges.length + 
                                  (this.data.roommate ? this.data.roommate.badges.length : 0) +
                                  (this.data.neighbor ? this.data.neighbor.badges.length : 0) +
                                  this.data.globalBadges.length;
                const studyTimeHours = Math.floor(this.data.totalStudyTime / (1000 * 60 * 60));

                return {
                    lessonsCompleted: listeningLessons,
                    chaptersRead: totalChapters,
                    totalBadges: totalBadges,
                    studyTime: studyTimeHours
                };
            }
        }

        // ===== INICIALIZAÃ‡ÃƒO =====
        document.addEventListener('DOMContentLoaded', function() {
            const studentName = getStudentName();
            const progressTracker = new ProgressTracker();
            const stats = progressTracker.getStats();
            
            // Atualizar informaÃ§Ãµes do usuÃ¡rio
            document.getElementById('userName').textContent = studentName;
            document.getElementById('userAvatar').textContent = studentName.charAt(0).toUpperCase();
            document.getElementById('welcomeMessage').textContent = `Bem-vindo de volta, ${studentName}!`;
            
            // Atualizar estatÃ­sticas
            document.getElementById('lessonsCompleted').textContent = stats.lessonsCompleted;
            document.getElementById('chaptersRead').textContent = stats.chaptersRead;
            document.getElementById('totalBadges').textContent = stats.totalBadges;
            document.getElementById('studyTime').textContent = stats.studyTime + 'h';
            
            // Adicionar badges de progresso
            const listeningCard = document.querySelector('.activity-card[href="listening.html"]');
            const readingCard = document.querySelector('.activity-card[href="reader.html"]');
            const roommateCard = document.querySelector('.activity-card[href="roommate.html"]');
            const neighborCard = document.querySelector('.activity-card[href="neighbor.html"]');
            
            if (stats.lessonsCompleted > 0) {
                const badge = document.createElement('div');
                badge.className = 'progress-badge';
                badge.textContent = `${stats.lessonsCompleted}/5 âœ“`;
                listeningCard.appendChild(badge);
            }
            
            const readingCompleted = progressTracker.data.reading.chaptersCompleted.length;
            if (readingCompleted > 0) {
                const badge = document.createElement('div');
                badge.className = 'progress-badge';
                badge.textContent = `${readingCompleted}/4 âœ“`;
                readingCard.appendChild(badge);
            }
            
            const roommateCompleted = progressTracker.data.roommate ? progressTracker.data.roommate.chaptersCompleted.length : 0;
            if (roommateCompleted > 0) {
                const badge = document.createElement('div');
                badge.className = 'progress-badge';
                badge.textContent = `${roommateCompleted}/3 âœ“`;
                roommateCard.appendChild(badge);
            }
            
            const neighborCompleted = progressTracker.data.neighbor ? progressTracker.data.neighbor.chaptersCompleted.length : 0;
            if (neighborCompleted > 0) {
                const badge = document.createElement('div');
                badge.className = 'progress-badge';
                badge.textContent = `${neighborCompleted}/5 âœ“`;
                neighborCard.appendChild(badge);
            }
            
            // AnimaÃ§Ã£o de contadores
            animateCounters();
        });

        function animateCounters() {
            const counters = document.querySelectorAll('.stat-number');
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const target = parseInt(entry.target.textContent.replace('h', ''));
                        let current = 0;
                        const increment = target / 20;
                        const timer = setInterval(() => {
                            current += increment;
                            if (current >= target) {
                                entry.target.textContent = target + (entry.target.textContent.includes('h') ? 'h' : '');
                                clearInterval(timer);
                            } else {
                                entry.target.textContent = Math.floor(current) + (entry.target.textContent.includes('h') ? 'h' : '');
                            }
                        }, 50);
                        observer.unobserve(entry.target);
                    }
                });
            });
            
            counters.forEach(counter => observer.observe(counter));
        }

        // ===== NAVEGAÃ‡ÃƒO =====
        document.querySelectorAll('.activity-card').forEach(card => {
            card.addEventListener('click', function(e) {
                // Efeito de loading
                const button = this.querySelector('.start-button');
                const originalText = button.textContent;
                button.textContent = 'Carregando...';
                button.style.background = '#6b7280';
                
                setTimeout(() => {
                    window.location.href = this.getAttribute('href');
                }, 800);
                
                e.preventDefault();
            });
        });
    </script>
</body>
</html>
